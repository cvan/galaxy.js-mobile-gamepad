!function e(t,r,o){function n(a,c){if(!r[a]){if(!t[a]){var i="function"==typeof require&&require;if(!c&&i)return i(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=r[a]={exports:{}};t[a][0].call(d.exports,function(e){var r=t[a][1][e];return n(r?r:e)},d,d.exports,e,t,r,o)}return r[a].exports}for(var s="function"==typeof require&&require,a=0;a<o.length;a++)n(o[a]);return n}({1:[function(e){function t(e){i.DEBUG&&console.log("Sent: "+("object"==typeof e?JSON.stringify(e):e)),h.send(e)}function r(e,t){var r=e.getContext("2d"),o=0;for(r.beginPath(),r.moveTo(t[0][0],t[0][1]),t.slice(1);o<t.length;o++)r.lineTo(t[o][0],t[o][1]);return r.closePath(),r}function o(e,t,r,o){var n=e.createLinearGradient(o[0],o[1],o[2],o[3]);n.addColorStop(0,t),n.addColorStop(1,r),e.fillStyle=n,e.fill()}function n(e,t,n,s){var a=r(e,[[t,n],[t+5,n+3.5],[t+5,s+3.5],[t,s]]);o(a,"#666","#000",[t,n,t+15,n])}function s(e,t,n,s){var a=r(e,[[n,t],[n+5,t+3.5],[s+5,t+3.5],[s,t]]);o(a,"#666","#000",[n,t,n,t+15])}function a(e,r,o){document.querySelector("#"+e).addEventListener(r,function(r){r.target&&r.target.parentNode===w&&w.classList.toggle(this.id),x[e]=o,t(x)})}function c(e,r){document.addEventListener(e,function(e){if(!u.fieldFocused(e)){switch(e.keyCode){case 38:if(r&&x.up)return;x.up=r,w.className=r?"up":"";break;case 39:if(r&&x.right)return;x.right=r,w.className=r?"right":"";break;case 40:if(r&&x.down)return;x.down=r,w.className=r?"down":"";break;case 37:if(r&&x.left)return;x.left=r,w.className=r?"left":"";break;case 13:if(r&&x.start)return;x.start=r,m.dataset.pressed=+r;break;case 65:if(r&&x.a)return;x.a=r,y.dataset.pressed=+r;break;case 66:if(r&&x.b)return;x.b=r,v.dataset.pressed=+r;break;default:if(!(e.shiftKey||!r&&x.select))return;x.select=r,g.dataset.pressed=+r}t(x)}})}var i=e("./settings"),u=e("./lib/utils"),d=u.error,l=u.trace,f=u.getPins(),p=new Peer(f.controller,{key:i.PEERJS_KEY,debug:i.DEBUG?3:0});window.addEventListener("beforeunload",function(){p.destroy()});var h=p.connect(f.host);h.on("open",function(){l("My peer ID: "+p.id),l("My connection ID: "+h.id),h.on("data",function(e){l("Received: "+e)}),h.on("error",function(e){d(e.message)}),t({status:"ready"})});var w=document.querySelector("#dpad"),g=document.querySelector("#select"),m=document.querySelector("#start"),v=document.querySelector("#b"),y=document.querySelector("#a"),b=document.getElementById("dpad-body");s(b,63.5,0,100),s(b,100,36.5,63.5),n(b,63.5,0,36.5),n(b,63.5,63.5,100),n(b,100,36.5,63.5);var E=r(b,[[0,36.5],[36.5,36.5],[36.5,0],[63.5,0],[63.5,36.5],[100,36.5],[100,63.5],[63.5,63.5],[63.5,100],[36.5,100],[36.5,63],[0,63.5]]);E.fillStyle="#1a1a1a",E.shadowColor="rgba(0,0,0,.6)",E.shadowBlur=15,E.shadowOffsetX=20,E.shadowOffsetY=10,E.fill();var x={up:!1,right:!1,down:!1,left:!1,select:!1,start:!1,b:!1,a:!1};Object.keys(x).forEach(function(e){u.hasTouchEvents()?(a(e,"touchstart",!0),a(e,"touchend",!1)):(a(e,"mousedown",!0),a(e,"mouseup",!1))}),c("keydown",!0),c("keyup",!1)},{"./lib/utils":2,"./settings":3}],2:[function(e,t){function r(e,t){console[t||"log"]((window.performance.now()/1e3).toFixed(3)+": "+e)}function o(e){return r(e,"error")}function n(e){return r(e,"warn")}function s(){var e=window.location.pathname.indexOf(".html")?window.location.search.substr(1):window.location.pathname.substr(1),t={host:e,controller:e};return e?("host_"!==e.substr(0,11)&&(t.host="host_"+t.host),"controller_"!==e.substr(0,11)&&(t.controller="controller_"+t.controller),t):t}function a(e){return-1!==i.indexOf(e.target.nodeName.toLowerCase())}function c(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}var i=["input","keygen","meter","option","output","progress","select","textarea"];t.exports.trace=r,t.exports.error=o,t.exports.warn=n,t.exports.getPins=s,t.exports.fieldFocused=a,t.exports.hasTouchEvents=c},{}],3:[function(e,t){var r={};try{r=e("./settings_local.js")}catch(o){}var n={API_URL:"http://localhost:5000",DEBUG:!1,PEERJS_KEY:"",VERSION:"0.0.1"};for(var s in r)n[s]=r[s];t.exports=n},{"./settings_local.js":4}],4:[function(e,t){t.exports={DEBUG:!0,PEERJS_KEY:"r1kfe5ze21iw9udi"}},{}]},{},[1]);