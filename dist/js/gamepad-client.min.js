!function e(t,n,r){function o(u,l){if(!n[u]){if(!t[u]){var i="function"==typeof require&&require;if(!l&&i)return i(u,!0);if(c)return c(u,!0);var s=new Error("Cannot find module '"+u+"'");throw s.code="MODULE_NOT_FOUND",s}var a=n[u]={exports:{}};t[u][0].call(a.exports,function(e){var n=t[u][1][e];return o(n?n:e)},a,a.exports,e,t,n,r)}return n[u].exports}for(var c="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e){function t(){return!("disableAutoFullScreen"in localStorage)}function n(e){s.DEBUG&&console.log("Sent: "+("object"==typeof e?JSON.stringify(e):e)),g.send(e)}function r(e,t){var n=e.getContext("2d"),r=0;for(n.beginPath(),n.moveTo(t[0][0],t[0][1]),t.slice(1);r<t.length;r++)n.lineTo(t[r][0],t[r][1]);return n.closePath(),n}function o(e,t,n,r){var o=e.createLinearGradient(r[0],r[1],r[2],r[3]);o.addColorStop(0,t),o.addColorStop(1,n),e.fillStyle=o,e.fill()}function c(e,t,n,c){var u=r(e,[[t,n],[t+5,n+3.5],[t+5,c+3.5],[t,c]]);o(u,"#666","#000",[t,n,t+15,n])}function u(e,t,n,c){var u=r(e,[[n,t],[n+5,t+3.5],[c+5,t+3.5],[c,t]]);o(u,"#666","#000",[n,t,n,t+15])}function l(e,t,r){document.querySelector("#"+e).addEventListener(t,function(t){t.target&&t.target.parentNode===E&&E.classList.toggle(this.id),b[e]=r,n(b)})}function i(e,t){document.addEventListener(e,function(e){if(!a.fieldFocused(e)){switch(e.keyCode){case 38:if(t&&b.up)return;b.up=t,E.className=t?"up":"";break;case 39:if(t&&b.right)return;b.right=t,E.className=t?"right":"";break;case 40:if(t&&b.down)return;b.down=t,E.className=t?"down":"";break;case 37:if(t&&b.left)return;b.left=t,E.className=t?"left":"";break;case 13:if(t&&b.start)return;b.start=t,h.dataset.pressed=+t;break;case 65:if(t&&b.a)return;b.a=t,y.dataset.pressed=+t;break;case 66:if(t&&b.b)return;b.b=t,v.dataset.pressed=+t;break;default:if(!(e.shiftKey||!t&&b.select))return;b.select=t,w.dataset.pressed=+t}n(b)}})}var s=e("./settings"),a=e("./lib/utils"),d=a.error,m=a.trace;a.lockOrientation("landscape-primary"),document.addEventListener("keyup",function(e){if(!a.fieldFocused(e))switch(e.keyCode){case 70:return m('User pressed "F"; entering/exiting fullscreen'),a.toggleFullScreen();case 78:return m('User pressed "NF"; exiting fullscreen and will not automatically open next time'),localStorage.disableAutoFullScreen="1",a.toggleFullScreen()}}),document.addEventListener("click",function(e){!a.fieldFocused(e)&&t()&&(m("Automatically entering fullscreen"),a.toggleFullScreen())});var f=a.getPeerId(),p=new Peer("controller_"+f,{key:s.PEERJS_KEY,debug:s.DEBUG?3:0});window.addEventListener("beforeunload",function(){p.destroy()});var g=p.connect(f);g.on("open",function(){m("My peer ID: "+p.id),m("My connection ID: "+g.id),g.on("data",function(e){m("Received: "+e)}),g.on("error",function(e){d(e.message)}),n({status:"ready"})});var E=document.querySelector("#dpad"),w=document.querySelector("#select"),h=document.querySelector("#start"),v=document.querySelector("#b"),y=document.querySelector("#a"),x=document.getElementById("dpad-body");u(x,63.5,0,100),u(x,100,36.5,63.5),c(x,63.5,0,36.5),c(x,63.5,63.5,100),c(x,100,36.5,63.5);var F=r(x,[[0,36.5],[36.5,36.5],[36.5,0],[63.5,0],[63.5,36.5],[100,36.5],[100,63.5],[63.5,63.5],[63.5,100],[36.5,100],[36.5,63],[0,63.5]]);F.fillStyle="#1a1a1a",F.shadowColor="rgba(0,0,0,.6)",F.shadowBlur=15,F.shadowOffsetX=20,F.shadowOffsetY=10,F.fill();var b={up:!1,right:!1,down:!1,left:!1,select:!1,start:!1,b:!1,a:!1};Object.keys(b).forEach(function(e){a.hasTouchEvents()?(l(e,"touchstart",!0),l(e,"touchend",!1)):(l(e,"mousedown",!0),l(e,"mouseup",!1))}),i("keydown",!0),i("keyup",!1)},{"./lib/utils":2,"./settings":3}],2:[function(e,t){function n(e,t){console[t||"log"]((window.performance.now()/1e3).toFixed(3)+": "+e)}function r(e){return n(e,"error")}function o(e){return n(e,"warn")}function c(){return window.location.pathname.indexOf(".html")?window.location.search.substr(1):window.location.pathname.substr(1)}function u(e){return-1!==p.indexOf(e.target.nodeName.toLowerCase())}function l(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}function i(e){var t=document.createElement("link");t.href=e.href,t.media="all",t.rel="stylesheet",t.type="text/css",Object.keys(e||{}).forEach(function(n){t[n]=e[n]}),document.querySelector("head").appendChild(t)}function s(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;"):e}function a(){return!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)}function d(){a()?(n("Entering full screen"),document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen()):(n("Exiting full screen"),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen())}function m(){var e=screen.LockOrientation||screen.mozLockOrientation||screen.webkitLockOrientation||screen.msLockOrientation;return e?(e(orientation),void 0):o("Orientation could not be locked")}function f(e){var t=document.createEvent("HTMLEvents");t.initEvent(e,!0,!0),t.eventName=e,(document.body||window).dispatchEvent(t)}var p=["input","keygen","meter","option","output","progress","select","textarea"];t.exports.trace=n,t.exports.error=r,t.exports.warn=o,t.exports.getPeerId=c,t.exports.fieldFocused=u,t.exports.hasTouchEvents=l,t.exports.injectCSS=i,t.exports.escape=s,t.exports.isFullScreen=a,t.exports.toggleFullScreen=d,t.exports.lockOrientation=m,t.exports.triggerEvent=f},{}],3:[function(e,t){var n={};try{n=e("./settings_local.js")}catch(r){}var o={API_URL:"http://localhost:5000",DEBUG:!1,PEERJS_KEY:"",VERSION:"0.0.1"};for(var c in n)o[c]=n[c];t.exports=o},{"./settings_local.js":4}],4:[function(e,t){t.exports={DEBUG:!0,PEERJS_KEY:"rovu5xmqo69wwmi"}},{}]},{},[1]);