!function e(t,n,r){function o(l,i){if(!n[l]){if(!t[l]){var u="function"==typeof require&&require;if(!i&&u)return u(l,!0);if(c)return c(l,!0);var a=new Error("Cannot find module '"+l+"'");throw a.code="MODULE_NOT_FOUND",a}var s=n[l]={exports:{}};t[l][0].call(s.exports,function(e){var n=t[l][1][e];return o(n?n:e)},s,s.exports,e,t,n,r)}return n[l].exports}for(var c="function"==typeof require&&require,l=0;l<r.length;l++)o(r[l]);return o}({1:[function(e){!function(t,n){"use strict";function r(){return!("disableAutoFullScreen"in localStorage)}function o(e){f.DEBUG&&console.log("Sent: "+("object"==typeof e?JSON.stringify(e):e)),h.send(e)}function c(e,t){var n=e.getContext("2d"),r=0;for(n.beginPath(),n.moveTo(t[0][0],t[0][1]),t.slice(1);r<t.length;r++)n.lineTo(t[r][0],t[r][1]);return n.closePath(),n}function l(e,t,n,r){var o=e.createLinearGradient(r[0],r[1],r[2],r[3]);o.addColorStop(0,t),o.addColorStop(1,n),e.fillStyle=o,e.fill()}function i(e,t,n,r){var o=c(e,[[t,n],[t+5,n+3.5],[t+5,r+3.5],[t,r]]);l(o,"#666","#000",[t,n,t+15,n])}function u(e,t,n,r){var o=c(e,[[n,t],[n+5,t+3.5],[r+5,t+3.5],[r,t]]);l(o,"#666","#000",[n,t,n,t+15])}function a(e,t,r){n.querySelector("#"+e).addEventListener(t,function(t){t.target&&t.target.parentNode===y&&y.classList.toggle(this.id),x[e]=r,o({type:"state",data:x})})}function s(e,t){n.addEventListener(e,function(e){if(!d.fieldFocused(e)){switch(e.keyCode){case 38:if(t&&x.up)return;x.up=t,y.className=t?"up":"";break;case 39:if(t&&x.right)return;x.right=t,y.className=t?"right":"";break;case 40:if(t&&x.down)return;x.down=t,y.className=t?"down":"";break;case 37:if(t&&x.left)return;x.left=t,y.className=t?"left":"";break;case 13:if(t&&x.start)return;x.start=t,v.dataset.pressed=+t;break;case 65:if(t&&x.a)return;x.a=t,F.dataset.pressed=+t;break;case 66:if(t&&x.b)return;x.b=t,b.dataset.pressed=+t;break;default:if(!(e.shiftKey||!t&&x.select))return;x.select=t,w.dataset.pressed=+t}o(x)}})}var f=e("./settings"),d=e("./lib/utils")(t,n),m=d.error,p=d.trace;d.polyfill(),d.lockOrientation("landscape-primary"),n.addEventListener("keyup",function(e){if(!d.fieldFocused(e))switch(e.keyCode){case 70:return p('User pressed "F"; entering/exiting fullscreen'),d.toggleFullScreen();case 78:return p('User pressed "NF"; exiting fullscreen and will not automatically open next time'),localStorage.disableAutoFullScreen="1",d.toggleFullScreen()}}),n.addEventListener("click",function(e){!d.fieldFocused(e)&&r()&&(p("Automatically entering fullscreen"),d.toggleFullScreen())});var g=d.getPeerId(),E=new t.Peer("controller_"+g,{key:f.PEERJS_KEY,debug:f.DEBUG?3:0});t.addEventListener("beforeunload",function(){E.destroy()});var h=E.connect(g);h.on("open",function(){p("My peer ID: "+E.id),p("My connection ID: "+h.id),h.on("data",function(e){p("Received: "+e)}),h.on("error",function(e){m(e.message)})});var y=n.querySelector("#dpad"),w=n.querySelector("#select"),v=n.querySelector("#start"),b=n.querySelector("#b"),F=n.querySelector("#a"),k=n.getElementById("dpad-body");u(k,63.5,0,100),u(k,100,36.5,63.5),i(k,63.5,0,36.5),i(k,63.5,63.5,100),i(k,100,36.5,63.5);var S=c(k,[[0,36.5],[36.5,36.5],[36.5,0],[63.5,0],[63.5,36.5],[100,36.5],[100,63.5],[63.5,63.5],[63.5,100],[36.5,100],[36.5,63],[0,63.5]]);S.fillStyle="#1a1a1a",S.shadowColor="rgba(0,0,0,.6)",S.shadowBlur=15,S.shadowOffsetX=20,S.shadowOffsetY=10,S.fill();var x={up:!1,right:!1,down:!1,left:!1,select:!1,start:!1,b:!1,a:!1};Object.keys(x).forEach(function(e){d.hasTouchEvents()?(a(e,"touchstart",!0),a(e,"touchend",!1)):(a(e,"mousedown",!0),a(e,"mouseup",!1))}),s("keydown",!0),s("keyup",!1)}(window,document)},{"./lib/utils":2,"./settings":3}],2:[function(e,t){t.exports=function(e,t){"use strict";function n(t,n){console[n||"log"]((e.performance.now()/1e3).toFixed(3)+": "+t)}function r(e){return n(e,"error")}function o(e){return n(e,"warn")}function c(){"performance"in e||(e.performance={now:function(){return+new Date}}),"origin"in e.location||(e.location.origin=e.location.protocol+"//"+e.location.host)}function l(){return e.location.pathname.indexOf(".html")?e.location.search.substr(1):e.location.pathname.substr(1)}function i(e){return-1!==g.indexOf(e.target.nodeName.toLowerCase())}function u(){return"ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch}function a(e){console.log("link");var n=t.createElement("link");n.href=e.href,n.media="all",n.rel="stylesheet",n.type="text/css",Object.keys(e||{}).forEach(function(t){n[t]=e[t]}),t.querySelector("head").appendChild(n)}function s(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;"):e}function f(){return!(t.fullscreenElement||t.mozFullScreenElement||t.webkitFullscreenElement||t.msFullscreenElement)}function d(){f()?(n("Entering full screen"),t.documentElement.requestFullscreen?t.documentElement.requestFullscreen():t.documentElement.mozRequestFullScreen?t.documentElement.mozRequestFullScreen():t.documentElement.webkitRequestFullscreen?t.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):t.documentElement.msRequestFullscreen&&t.documentElement.msRequestFullscreen()):(n("Exiting full screen"),t.exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen?t.webkitExitFullscreen():t.msExitFullscreen&&t.msExitFullscreen())}function m(t){var n=e.screen.LockOrientation||e.screen.mozLockOrientation||e.screen.webkitLockOrientation||e.screen.msLockOrientation;return n?n(t):o("Orientation could not be locked")}function p(n){var r=t.createEvent("HTMLEvents");r.initEvent(n,!0,!0),r.eventName=n,(t.body||e).dispatchEvent(r)}if(!e)throw new Error("window required");if(!t)throw new Error("document required");var g=["input","keygen","meter","option","output","progress","select","textarea"];return{trace:n,error:r,warn:o,polyfill:c,getPeerId:l,fieldFocused:i,hasTouchEvents:u,injectCSS:a,escape:s,isFullScreen:f,toggleFullScreen:d,lockOrientation:m,triggerEvent:p}}},{}],3:[function(e,t){"use strict";var n={};try{n=e("./settings_local.js")}catch(r){}var o={API_URL:"http://localhost:5000",DEBUG:!1,PEERJS_KEY:"",VERSION:"0.0.1"};Object.keys(n).forEach(function(e){o[e]=n[e]}),t.exports=o},{"./settings_local.js":4}],4:[function(e,t){t.exports={DEBUG:!0,PEERJS_KEY:"rovu5xmqo69wwmi"}},{}]},{},[1]);